:root{
  --bg: #0b0e14;
  --panel: #111522;
  --panel-2:#161b2c;
  --text: #e8ecf1;
  --muted:#9aa4b2;
  --accent:#6c63ff;
  --accent-2:#4caf50;
  --danger:#ff5d5d;
  --bubble-user:#1d263d;
  --bubble-bot:#171c2e;
  --border: #22283c;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}

body[data-theme="light"]{
  --bg:#f4f7fc;
  --panel:#ffffff;
  --panel-2:#ffffff;
  --text:#0b1220;
  --muted:#5a667a;
  --accent:#5b55ff;
  --accent-2:#2faa58;
  --bubble-user:#e7f1ff;
  --bubble-bot:#f2f4f7;
  --border:#e6e9f2;
  --shadow: 0 8px 24px rgba(9,30,66,.12);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font: 15px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  transition: background .3s ease, color .3s ease;
}

.app{
  max-width: 900px;
  height: 100vh;
  margin: 0 auto;
  display: grid;
  grid-template-rows: auto 1fr auto auto;
}

.app-header{
  display:flex; align-items:center; justify-content:space-between;
  padding: 14px 16px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow);
  position: sticky; top:0; z-index: 2;
}

.brand{display:flex; gap:12px; align-items:center}
.logo{font-size:26px}
.title{font-weight:700}
.subtitle{font-size:12px; color:var(--muted)}
.header-actions{display:flex; gap:8px}

.btn{
  background: var(--panel-2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 10px;
  border-radius: 10px;
  cursor:pointer;
  transition: transform .06s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{transform: translateY(-1px)}
.btn:active{transform: translateY(0)}

.status-dot{
  display:inline-block; width:8px; height:8px; border-radius:99px;
  margin-right:6px; vertical-align: middle;
  background: var(--danger);
}
.status-dot.online{ background: var(--accent-2); }
.status-dot.offline{ background: var(--danger); }
.status-dot.idle{ background: var(--accent); }

.chat{
  padding: 18px 16px 8px;
  overflow-y:auto;
  display:flex; flex-direction:column;
  gap: 8px;
}

.msg{
  display:flex; gap:10px; max-width: 80%;
  animation: pop .08s ease;
}
.msg.right{ align-self:flex-end; flex-direction: row-reverse; }
.msg .avatar{
  width:32px; height:32px; border-radius: 12px;
  background: var(--panel-2); display:flex; align-items:center; justify-content:center;
  border:1px solid var(--border);
  flex: 0 0 auto;
}
.msg .bubble{
  padding: 10px 12px; border-radius: 14px;
  background: var(--bubble-bot);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  overflow: hidden;
}
.msg.right .bubble{ background: var(--bubble-user); }
.msg .meta{
  margin-top:6px; font-size:11px; color: var(--muted); display:flex; gap:8px; align-items:center;
}
.msg .copy{
  cursor:pointer; opacity:.7; user-select:none;
}
.msg .copy:hover{ opacity:1 }

.typing{
  display:inline-flex; gap:5px; align-items:center;
}
.dot{width:6px; height:6px; border-radius:50%; background: var(--muted); opacity:.5; animation: blink 1s infinite}
.dot:nth-child(2){animation-delay:.2s}
.dot:nth-child(3){animation-delay:.4s}

.composer{
  display:flex; gap:8px; padding: 12px; background: var(--panel);
  border-top: 1px solid var(--border);
  position: sticky; bottom: 0; z-index: 2;
}
#input{
  flex:1; resize:none; min-height:42px; max-height:160px;
  border-radius: 12px; border:1px solid var(--border); padding: 10px 12px;
  background: var(--panel-2); color: var(--text); outline:none;
}
.btn-send{
  width: 46px; border-radius: 12px; border:1px solid var(--border);
  background: var(--accent); color: #fff; cursor:pointer; font-size:18px;
  display:flex; align-items:center; justify-content:center;
  transition: transform .06s ease, filter .2s ease;
}
.btn-send:hover{ filter: brightness(1.05) }
.btn-send:active{ transform: translateY(1px) }

.disclaimer{
  text-align:center; color: var(--muted); font-size: 12px; padding: 8px;
}

pre, code{ white-space: pre-wrap; word-wrap: break-word; }
pre code{ display:block; padding:10px; border-radius: 10px; border:1px solid var(--border); background: var(--panel-2); }

/* Scrollbar (WebKit) */
.chat::-webkit-scrollbar{ width:10px }
.chat::-webkit-scrollbar-thumb{ background: #00000033; border-radius: 99px }

@keyframes pop{ from{ transform: translateY(4px); opacity:0 } to{ transform: translateY(0); opacity:1 } }
@keyframes blink{ 0%{opacity:.3} 50%{opacity:1} 100%{opacity:.3} }

@media (max-width: 640px){
  .msg{ max-width: 95% }
  .app{ grid-template-rows:auto 1fr auto auto }
}
